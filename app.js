var express		=	require("express");
	methodOverride=require("method-override"),
 	app			=	express();
	mongoose	=	require("mongoose");
	expressSanitizer	=	require("express-sanitizer");
	bodyParser	=	require("body-parser");
app.set("view engine", "ejs");
app.use(bodyParser.urlencoded({extended : true}));
app.use(expressSanitizer())
app.use(express.static("public"));
app.use(methodOverride("_method"));
mongoose.set('useNewUrlParser', true);
mongoose.set('useUnifiedTopology', true);

mongoose.connect("mongodb://localhost/restful_blog_app");

var blogSchema=new mongoose.Schema({
	title: String,
	image: String,
	body: String,
	created: {type:Date, default:Date.now}
});

var Blog=mongoose.model("Blog",blogSchema);
/*Blog.create({
	title:"Sports",
	                image:"data:image/jpeg;base64,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",
	body:"The sports is a integralpart of out daily activities which is necessary along with the studies."
	
})*/
app.get("/",function(req,res){
	res.redirect("/blogs");
});
app.get("/blogs",function(req,res){
	Blog.find({},function(err,blogs){
		if(err){
			console.log(err);
		} else {
			res.render("index",{blogs:blogs});
		}
	});
});

app.get("/blogs/new", function(req,res){
	res.render("new");
});

app.post("/blogs", function(req,res){
	req.body.blog.body= req.sanitize(req.body.blog.body);
	Blog.create(req.body.blog, function(err,newBlog){
		if(err){
			res.render("new");
		} else {
			res.redirect("/blogs");
		}
	});
});

app.get("/blogs/:id",function(req,res){
	Blog.findById(req.params.id,function(err,foundBlog){
		if(err){
			res.redirect("/blogs");
		} else {
			res.render("show", {blog: foundBlog});
		}
	});
});
	
app.get("/blogs/:id/edit", function(req,res){
	Blog.findById(req.params.id,function(err,foundBlog){
		if(err){
			res.redirect("/blogs");
		} else {
			res.render("edit", {blog: foundBlog});
		}
		
	});
});

app.put("/blogs/:id",function(req,res){
	req.body.blog.body= req.sanitize(req.body.blog.body);
	Blog.findByIdAndUpdate(req.params.id,req.body.blog,function(err,updatedBlog){
		if(err){
			res.redirect("/blogs");
		} else {
			res.redirect("/blogs/"+ req.params.id);
		}
	})
});

app.delete("/blogs/:id", function(req,res){
	Blog.findByIdAndRemove(req.params.id, function(err){
		if(err){
			res.redirect("/blogs");
		} else {
			res.redirect("/blogs");
		}
	})
})
	
	






app.listen(process.env.PORT || 4000,process.env.IP,function(){
	console.log("The blog server has started!");
});
		